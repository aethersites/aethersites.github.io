<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GoodPlates — Profile (Enhanced)</title>
<!-- [your CSS is unchanged and not repeated here for brevity, keep as-is] -->
<link rel="stylesheet" href="your-styles.css" />
</head>
<body>
<div class="app">
  <!-- Sidebar [unchanged] -->
  <aside class="sidebar">
    <!-- ... sidebar content ... -->
  </aside>

  <!-- Main -->
  <main class="main">
    <div class="topbar">
      <div class="search" aria-hidden>
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none"><path d="M21 21l-4.35-4.35" stroke="#6b7280" stroke-width="1.6" stroke-linecap="round"/></svg>
        <input placeholder="Search recipes, orders, ingredients..." />
      </div>

      <div style="display:flex;gap:12px;align-items:center">
        <div id="loggedAs" class="meta muted"></div>
        <button id="loginBtn" class="btn ghost">Login</button>
        <button id="logoutBtn" class="btn ghost" style="display:none">Logout</button>
      </div>
    </div>

    <h2 class="page-title">Profile</h2>
    <div class="page-sub">Enhanced profile settings — autosave, history, sessions and quick sync to server.</div>

    <div class="grid">
      <!-- left: avatar & prefs -->
      <aside class="card">
        <div class="avatar-wrap">
          <div class="avatar" id="avatarPreview">
            <img src="https://i.pravatar.cc/300?img=5" alt="avatar">
          </div>
          <div style="text-align:center">
            <div id="previewName" style="font-weight:800;font-size:18px">Guest</div>
            <div id="previewEmail" class="muted small">not logged in</div>
          </div>

          <div style="width:100%;margin-top:8px">
            <label class="small muted">Upload avatar (png/jpg)</label>
            <div class="upload">
              <input id="avatarInput" type="file" accept="image/*" />
              <button id="removeAvatar" class="btn ghost" type="button" style="padding:8px 10px">Remove</button>
            </div>
            <div class="meta small" style="margin-top:6px">Images are resized & compressed client-side (400×400)</div>
          </div>

          <div style="width:100%;margin-top:12px">
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div class="meta">Profile status</div>
              <div id="saveStatus" class="status unsaved">Not saved</div>
            </div>
          </div>
        </div>
      </aside>

      <!-- right: editable form -->
      <section class="card">
        <form id="profileForm">
          <div style="display:flex;justify-content:space-between;align-items:center">
            <div style="font-weight:800">Account Details</div>
            <div class="meta small">Autosaves changes — you can also Save</div>
          </div>

          <div style="margin-top:12px">
            <label for="fullName">Full name <span style="color:#a00d12">*</span></label>
            <input id="fullName" name="fullName" type="text" placeholder="Jane Doe" required />
            <div id="errName" class="field-error" style="display:none"></div>
          </div>

          <div>
            <label for="email">Email (used as account id) <span style="color:#a00d12">*</span></label>
            <input id="email" name="email" type="email" placeholder="you@domain.com" required />
            <div id="errEmail" class="field-error" style="display:none"></div>
          </div>

          <div class="row">
            <div>
              <label for="phone">Phone</label>
              <input id="phone" name="phone" type="tel" placeholder="+1 555 555 5555" />
              <div id="errPhone" class="field-error" style="display:none"></div>
            </div>
            <div>
              <label for="location">Location</label>
              <input id="location" name="location" type="text" placeholder="City, State" />
            </div>
          </div>

          <div>
            <label for="address">Default Delivery Address</label>
            <input id="address" name="address" type="text" placeholder="123 Green St, Apt 5" />
          </div>

          <div>
            <label for="dietTags">Dietary Preferences</label>
            <div class="chips" id="dietChips">
              <!-- chips inserted via JS -->
            </div>
            <div class="meta small" style="margin-top:6px">Click to toggle multiple preferences</div>
          </div>

          <div class="row">
            <div>
              <label for="nutritionGoals">Nutrition goals</label>
              <input id="nutritionGoals" name="nutritionGoals" type="text" placeholder="Maintain 1800-2000 kcal/day" />
            </div>
            <div>
              <label for="units">Units</label>
              <select id="units" name="units">
                <option value="metric">Metric</option>
                <option value="imperial">Imperial</option>
              </select>
            </div>
          </div>

          <div>
            <label for="preferredDelivery">Preferred Delivery Time</label>
            <select id="preferredDelivery" name="preferredDelivery">
              <option value="">No preference</option>
              <option value="morning">Morning (8am–11am)</option>
              <option value="afternoon">Afternoon (12pm–4pm)</option>
              <option value="evening">Evening (5pm–9pm)</option>
            </select>
          </div>

          <div>
            <label for="bio">Bio</label>
            <textarea id="bio" name="bio" placeholder="A short bio..."></textarea>
          </div>

          <hr style="border:none;border-top:1px dashed var(--border)"/>

          <!-- password change (if you wish to keep, but local/demo only) -->
          <div>
            <div style="display:flex;justify-content:space-between;align-items:center">
              <div style="font-weight:700">Security</div>
              <div class="meta small">Change password (local demo)</div>
            </div>
            <div style="display:flex;gap:12px;margin-top:8px">
              <input id="newPassword" name="newPassword" type="password" placeholder="New password" />
              <button id="setPasswordBtn" class="btn ghost" type="button">Set</button>
            </div>
            <div style="margin-top:8px">
              <div class="strength" aria-hidden><i id="pwStrengthBar"></i></div>
              <div id="pwStrengthText" class="meta small" style="margin-top:6px">Password strength: —</div>
            </div>
          </div>

          <hr style="border:none;border-top:1px dashed var(--border)"/>

          <div style="display:flex;gap:12px;flex-wrap:wrap;align-items:center;margin-top:6px">
            <button id="saveBtn" class="btn" type="submit">Save Profile</button>
            <button id="deleteBtn" class="btn danger" type="button">Delete Profile</button>
          </div>
        </form>
      </section>
    </div>
  </main>
</div>

<!-- Only include your Firebase dashboard logic, not the localStorage one! -->
<script type="module" src="dashboard-firebase.js"></script>
</body>
</html>
