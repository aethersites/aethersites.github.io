<!doctype html>
<html lang="en">
<head>
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GoodPlates - Groceries & Nutrition Dashboard</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg: #ffffff;
      --fg: #0f172a;
      --muted: #6b7280;
      --muted-2: #9ca3af;
      --border: #e5e7eb;
      --surface: #ffffff;
      --surface-2: #f3f4f6;
      --primary: #16a34a;
      --primary-700: #15803d;
      --primary-100: #dcfce7;
      --ring: rgba(16,185,129,.35);
      --shadow: 0 1px 2px rgba(0,0,0,.06), 0 8px 24px rgba(2,6,23,.06);
      --radius: 16px;
      --accent: var(--primary);
      --accent-soft: rgba(22,163,74,0.08);
      --card: var(--surface);
    }
    body{
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: var(--bg);
      color: var(--fg);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }
    .sidebar { width: 300px; }
    .card {
      background: var(--card);
      border-radius: 12px;
      box-shadow: var(--shadow);
      border: 1px solid var(--border);
    }
    .pro-badge{
      background: linear-gradient(90deg,var(--primary-100), #e6ffef);
      color:var(--primary);
      font-weight:600; padding:4px 8px; border-radius:999px; font-size:12px;
    }
    .active-pill{
      background: linear-gradient(90deg,var(--primary),var(--primary-700));
      color:white; padding:10px 18px; border-radius:999px;
    }
    .small-dot{ width:6px;height:6px;border-radius:99px;background:var(--surface-2); }
    .dot-active{ background:linear-gradient(90deg,var(--primary),#34d399); }
    .dots { width:8px;height:8px;border-radius:999px;background:#f3f4f6; }
    .shadow-soft{ box-shadow: 0 6px 20px rgba(16,24,40,0.06); }
    .upgrade-btn-main {
      position: relative;
      display: inline-block;
      width: 100%;
      padding: 0.5rem 1rem;
      border-radius: 10px;
      background: linear-gradient(270deg, #16a34a, #10b981, #16a34a);
      background-size: 200% 200%;
      color: white;
      font-weight: 600;
      text-align: center;
      box-shadow: 0 6px 20px rgba(22, 163, 74, 0.18);
      transition: box-shadow 0.8s ease, color 0.3s ease, background 0.3s ease, opacity 0.5s ease;
    }
    .upgrade-btn-main::after {
      content: "";
      position: absolute;
      top: 0; left: 0; right: 0; bottom: 0;
      background: linear-gradient(120deg, rgba(255,255,255,0.3) 0%, rgba(255,255,255,0) 80%);
      opacity: 0;
      transition: opacity 0.6s ease-in-out;
      border-radius: inherit;
    }
    .upgrade-btn-main:hover {
      color: #fff;
      box-shadow: 0 0 15px rgba(22, 163, 74, 0.35),
                  0 0 25px rgba(16, 185, 129, 0.2);
      animation: gradientShift 3s ease-in-out infinite;
    }
    .upgrade-btn-main:hover::after {
      opacity: 1;
    }
    @keyframes gradientShift {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    .chart-ghost { stroke:var(--primary-100); stroke-width:3; stroke-linecap:round; }
    .text-slate-700 { color: var(--fg) !important; }
    .text-slate-600 { color: var(--muted) !important; }
    .text-slate-500 { color: var(--muted) !important; }
    .text-slate-400 { color: var(--muted-2) !important; }
    .text-slate-800 { color: var(--fg) !important; }
    .bg-white { background: var(--surface) !important; }
    .bg-green-50 { background: var(--primary-100) !important; }
    .bg-slate-50 { background: var(--surface-2) !important; }
    .border-slate-100 { border-color: var(--border) !important; }
    .rounded-md { border-radius: 10px !important; }
    .nav-link{
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.5rem 0.75rem;
      border-radius: 10px;
      transition: background-color 250ms ease, color 250ms ease;
      color: var(--muted);
      text-decoration: none;
      width: 100%;
    }
    .nav-link:hover{
      background: #e9fbef;
      color: var(--primary-700);
    }
    .nav-active{
      background: #F1FDF4;
      color: var(--primary-700);
      font-weight: 600;
    }
    #avatarMenu, #avatarMenuMobile {
  position: fixed !important;
  z-index: 9999999999 !important;
  box-sizing: border-box;
  pointer-events: auto !important;
  display: block;
  visibility: hidden;
  opacity: 0;
  transform-origin: top right;
  transition: opacity 120ms ease, transform 120ms ease;
  min-width: 180px;
  max-width: calc(100% - 16px);
  overflow-y: auto;
  max-height: calc(100vh - 32px);
}
.gp-hidden {
  visibility: hidden !important;
  opacity: 0 !important;
  pointer-events: none !important;
  transform: translateY(-6px) scale(0.99);
}
.gp-visible {
  visibility: visible !important;
  opacity: 1 !important;
  pointer-events: auto !important;
  transform: translateY(0) scale(1);
}
    @media (max-width: 1100px) { .sidebar{ display:none; } }
  </style>
</head>
<body class="antialiased">
  <div class="flex min-h-screen">

    <!-- Sidebar -->
    <aside class="sidebar bg-white/50 p-6 border-r border-white/60">
      <div class="flex items-center gap-3 mb-6">
        <img src="/favicon.png" alt="GoodPlates Logo" class="w-8 h-8 rounded-md object-contain">
        <div class="font-semibold text-slate-700">GoodPlates</div>
      </div>
      <div class="text-xs uppercase mb-3 text-slate-400">Dashboard</div>
      <div class="mt-0">
        <nav class="mt-0 space-y-2">
          <a href="/overview/" class="nav-link nav-active">
            <span class="font-semibold">Overview</span>
            <span class="ml-auto pro-badge">Pro</span>
          </a>
          <a href="/profile/" class="nav-link">
            <span>Profile</span>
            <span class="ml-auto pro-badge">Pro</span>
          </a>
          <a href="/settings/" class="nav-link">
            <span>Settings</span>
            <span class="ml-auto pro-badge">Pro</span>
          </a>
          <a href="/family/" class="nav-link">
            <span>Family</span>
            <span class="ml-auto pro-badge">Pro</span>
          </a>
        </nav>
      </div>
      <div class="mt-10 border-t pt-6 text-slate-500">
        <div class="text-xs uppercase mb-3 text-slate-400">Apps & Pages</div>
        <ul class="space-y-2">
          <li>
            <a href="/saved-recipes/" class="nav-link">
              <span>Saved Recipes</span>
              <span class="ml-auto pro-badge">Pro</span>
            </a>
          </li>
          <li>
            <a href="/ai-recipes/" class="nav-link">
              <span>AI Recipes</span>
              <span class="ml-auto pro-badge">Pro</span>
            </a>
          </li>
          <li>
            <a href="/meal-planner/" class="nav-link">
              <span>Meal Planner</span>
              <span class="ml-auto pro-badge">Pro</span>
            </a>
          </li>
          <li class="mt-3">
            <a href="/nutrition/" class="nav-link">
              <span>Nutrition</span>
            </a>
          </li>
        </ul>
      </div>
      <div class="mt-8">
        <button class="upgrade-btn-main">
          Upgrade to Pro
        </button>
      </div>
    </aside>

    <!-- Main content area -->
    <main class="flex-1 p-8">
      <!-- Top bar -->
      <div class="flex items-center justify-between mb-6">
        <div class="flex items-baseline gap-2">
          <h2 class="text-base font-semibold text-slate-600">Dashboard</h2>
          <span class="text-base font-normal text-slate-400">/ Profile</span>
        </div>
        <div class="flex items-center gap-2">
          <div class="relative">
            <input id="searchInput" class="w-96 pl-4 pr-10 py-2 rounded-full bg-white border border-slate-100 shadow-sm" placeholder="Search ingredients, recipes...">
            <div class="absolute right-3 top-1/2 -translate-y-1/2">
              <img src="https://www.shareicon.net/data/2017/02/09/878632_find_512x512.png" alt="Search" class="w-4 h-4 object-contain">
            </div>
          </div>
          <a href="/"
             class="w-9 h-9 rounded-full flex items-center justify-center hover:opacity-90 transition"
             style="background: linear-gradient(270deg, #10b981, #16a34a);"
             aria-label="Home" title="Home">
            <img src="https://raw.githubusercontent.com/aethersites/aethersites.github.io/90eef6d3bd32bac358155d82a6be2a6762b5ae78/homeicon.png"
                 alt="Home"
                 class="w-7 h-7 object-contain" />
          </a>
          <a href="/linkdestination/"
             class="w-9 h-9 rounded-full flex items-center justify-center hover:opacity-90 transition"
             style="background: linear-gradient(270deg, #10b981, #16a34a);"
             aria-label="Notifications" title="Notifications">
            <img src="https://raw.githubusercontent.com/aethersites/aethersites.github.io/66c1b57c27716a6c3c14e2aa71467615ccc25b70/bellicon.png"
                 alt="Notifications"
                 class="w-7 h-7 object-contain" />
          </a>
          <!-- Avatar Button + Dropdown (Desktop) -->
<div style="position:relative; display:inline-block;">
  <button id="avatarBtn" aria-haspopup="true" aria-expanded="false" aria-controls="avatarMenu" title="Account"
          style="background:transparent;border:0;padding:0;cursor:pointer;">
    <div style="width:40px;height:40px;border-radius:100%;overflow:hidden;display:flex;justify-content:center;background:#fff;">
      <img id="avatarImg"
           src="https://static.vecteezy.com/system/resources/thumbnails/047/733/682/small_2x/grey-avatar-icon-user-avatar-photo-icon-social-media-user-icon-vector.jpg"
           alt="avatar" style="width:100%;height:100%;object-fit:cover;"/>
    </div>
  </button>
  <div id="avatarMenu" role="menu" aria-labelledby="avatarBtn" hidden
       style="background:#fff; color:#000; border-radius:10px; box-shadow:0 8px 24px rgba(2,6,23,0.08); min-width:180px; padding:6px 0;">
    <a role="menuitem" href="/overview/"    style="display:block;padding:10px 14px;text-decoration:none;color:#000;font-weight:600;">Overview</a>
    <a role="menuitem" href="/profile/"     style="display:block;padding:10px 14px;text-decoration:none;color:#000;font-weight:600;">Profile</a>
    <a role="menuitem" href="/wallet/"      style="display:block;padding:10px 14px;text-decoration:none;color:#000;font-weight:600;">Wallet</a>
    <a role="menuitem" href="/subscription/" style="display:block;padding:10px 14px;text-decoration:none;color:#000;font-weight:600;">Subscription</a>
    <a role="menuitem" href="/logout/"      style="display:block;padding:10px 14px;text-decoration:none;color:#000;font-weight:600;border-top:1px solid rgba(15,23,42,0.04);margin-top:6px;">Logout</a>
  </div>
</div>
        </div>
      </div>

      <!-- ========================= -->
      <!-- <<paste your entire page here>> -->
      <!-- ========================= -->

    </main>
  </div>
<script src="/dropdown.js"></script>

    <!-- PRO/LOGIN CHECK -->
    <script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-app.js";
import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-auth.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/12.1.0/firebase-firestore.js";

// Your Firebase config
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_AUTH_DOMAIN",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_STORAGE_BUCKET",
  messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
  appId: "YOUR_APP_ID"
};

const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);

onAuthStateChanged(auth, async (user) => {
  if (!user) {
    window.location.href = "/login-form";
    return;
  }
  try {
    const userDoc = await getDoc(doc(db, "users", user.uid));
    const data = userDoc.exists() ? userDoc.data() : {};
    const tier = (data.subscriptionTier || "").toLowerCase();
    if (tier === "pro" || tier === "premium") {
      document.querySelectorAll('.pro-badge').forEach(e => e.remove());
      document.querySelectorAll('.upgrade-btn-main').forEach(e => e.remove());
    }
  } catch (e) {
    // Optionally handle profile fetch errors
    console.error("Failed to fetch user profile:", e);
  }
});
</script>

    <!-- PRO/LOGIN END -->
    

</body>
</html>
<!-- <<close>> -->








